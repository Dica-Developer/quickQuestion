{"ts":1354048520618,"silentsave":true,"restoring":false,"patch":[[]],"length":0}
{"contributors":[],"silentsave":false,"ts":1354048557479,"patch":[[{"diffs":[[1,"var http = require('http');\n\nhttp.createServer(function (request, response) {\n  if ('GET' === request.method) {\n    var requestUrl = url.parse(request.url, true);\n    if ('/add' === requestUrl.pathname) {\n      var streamUrl = requestUrl.query.url;\n      if (streamUrl) {\n        var streamName = requestUrl.query.name;\n        if (!streamName) {\n          streamName = streamUrl;\n        }\n        streamingUrls.push({\"url\": streamUrl, \"name\": streamName});\n        writeStreamingUrls();\n        displaySong();\n        response.writeHead(200, {'Content-Type': 'text/plain'});\n        response.end(streamUrl +' added');\n      } else {\n        response.writeHead(400, {'Content-Type': 'text/plain'});\n        response.end('What should I add? You need to provide a valid url parameter to add something.');\n      }\n    } else if ('/next' === requestUrl.pathname) {\n      next();\n      displaySong();\n      response.writeHead(200, {'Content-Type': 'text/plain'});\n      response.end('Playing: '+ (streamingUrls[currentPosition] || \"Nothing\"));\n    } else if ('/prev' === requestUrl.pathname) {\n      prev();\n      displaySong();\n      response.writeHead(200, {'Content-Type': 'text/plain'});\n      response.end('Playing: '+ (streamingUrls[currentPosition] || \"Nothing\"));\n    } else if ('/play' === requestUrl.pathname) {\n      stop();\n      if (streamingUrls[currentPosition]) {\n        play(streamingUrls[currentPosition].url);\n      }\n      displaySong();\n      response.writeHead(200, {'Content-Type': 'text/plain'});\n      response.end('Playing: '+ (streamingUrls[currentPosition] || \"Nothing\"));\n    } else if ('/stop' === requestUrl.pathname) {\n      defaultScreen();\n      response.writeHead(200, {'Content-Type': 'text/plain'});\n      response.end('Stopping');\n      stop();\n    } else {\n      response.writeHead(400, {'Content-Type': 'text/plain'});\n      response.end('I did not understand the request. Try one of the following commands \"/add?url=[&name=]\", \"/next\", \"/prev\", \"/play\" or \"/stop\".');\n    }\n  }\n}).listen(3141);\n"]],"start1":0,"start2":0,"length1":0,"length2":2033}]],"length":2033,"saved":false}
{"ts":1354048729307,"patch":[[{"diffs":[[0,"'http');"],[1,"\nvar url = require('url');"],[0,"\n\nhttp.c"]],"start1":19,"start2":19,"length1":16,"length2":42},{"diffs":[[0,"    "],[-1,"var streamUrl = requestUrl.query.url;\n      if (streamUrl) {\n        var streamName = requestUrl.query.name;\n        if (!streamName) {\n          streamName = streamUrl;\n        }\n        streamingUrls.push({\"url\": streamUrl, \"name\": streamName});\n        writeStreamingUrls();\n        displaySong();\n        response.writeHead(200, {'Content-Type': 'text/plain'});\n        response.end(streamUrl +' added');\n      } else {\n        response.writeHead(400, {'Content-Type': 'text/plain'});\n        response.end('What should I add? You need to provide a valid url parameter to add something.');\n      }\n    } else if ('/next' === requestUrl.pathname) {\n      next();\n      displaySong();\n      response.writeHead(200, {'Content-Type': 'text/plain'});\n      response.end('Playing: '+ (streamingUrls[currentPosition] || \"Nothing\"));\n    } else if ('/prev' === requestUrl.pathname) {\n      prev();\n      displaySong();\n      response.writeHead(200, {'Content-Type': 'text/plain'});\n      response.end('Playing: '+ (streamingUrls[currentPosition] || \"Nothing\"));\n    } else if ('/play' === requestUrl.pathname) {\n      stop();\n      if (streamingUrls[currentPosition]) {\n        play(streamingUrls[currentPosition].url);\n      }\n      displaySong();\n      response.writeHead(200, {'Content-Type': 'text/plain'});\n      response.end('Playing: '+ (streamingUrls[currentPosition] || \"Nothing\"));\n    } else if ('/stop' === requestUrl.pathname) {\n      defaultScreen();\n      response.writeHead(200, {'Content-Type': 'text/plain'});\n      response.end('Stopping');\n      stop();"],[0,"\n   "]],"start1":233,"start2":233,"length1":1576,"length2":8},{"diffs":[[0,"est."],[-1," Try one of the following commands \"/add?url=[&name=]\", \"/next\", \"/prev\", \"/play\" or \"/stop\"."],[0,"');\n"]],"start1":363,"start2":363,"length1":101,"length2":8}]],"length":398,"saved":false}
{"ts":1354048839436,"patch":[[{"diffs":[[0,"{\n      "],[1,"var what = requestUrl.query.what;\n      var properties = JSON.parse(requestUrl.query.properties);"],[0,"\n    } e"]],"start1":229,"start2":229,"length1":16,"length2":113}]],"length":495,"saved":false}
{"ts":1354048900883,"patch":[[{"diffs":[[0,"erties ="],[1," null;\n      if (requestUrl.query.properties) {\n        properties ="],[0," JSON.pa"]],"start1":285,"start2":285,"length1":16,"length2":84},{"diffs":[[0,"rties);\n"],[1,"      }\n"],[0,"    } el"]],"start1":395,"start2":395,"length1":16,"length2":24}]],"length":571,"saved":false}
{"ts":1354049079671,"patch":[[{"diffs":[[0,"ten("],[-1,"3141"],[0,");\n"]],"start1":560,"start2":560,"length1":11,"length2":7}]],"length":567,"saved":false}
{"ts":1354049087023,"patch":[[{"diffs":[[0,".listen("],[1,"10000"],[0,");\n"]],"start1":556,"start2":556,"length1":11,"length2":16}]],"length":572,"saved":false}
{"ts":1354049112469,"patch":[[{"diffs":[[0,"ten("],[-1,"10000"],[1,"process.env.PORT"],[0,");\n"]],"start1":560,"start2":560,"length1":12,"length2":23}]],"length":583,"saved":false}
{"ts":1354049185743,"patch":[[{"diffs":[[0,"s = "],[-1,"null;\n      if ("],[0,"requ"]],"start1":290,"start2":290,"length1":24,"length2":8},{"diffs":[[0,"ties"],[-1,") {\n        properties = JSON.parse(requestUrl.query.properties"],[1,";\n      if (what) {\n        if (properties) {\n          properties = JSON.parse(requestUrl.query.properties);\n        }\n      } else {\n        response.writeHead(400, {'Content-Type': 'text/plain'});\n        response.end('What should I add?'"],[0,");\n "]],"start1":317,"start2":317,"length1":71,"length2":249}]],"length":745,"saved":false}
{"ts":1354049348628,"patch":[[{"diffs":[[0,"if (what) {\n"],[1,"        console.log('what: ' + what);\n"],[0,"        if ("]],"start1":329,"start2":329,"length1":24,"length2":62},{"diffs":[[0,"rties);\n"],[1,"          console.log('properties: ' + properties);\n"],[0,"        "]],"start1":461,"start2":461,"length1":16,"length2":68}]],"length":835,"saved":false}
{"ts":1354050860285,"patch":[[{"diffs":[[0,");\n        }"],[1," else {\n          properties = {};\n        }\n        "],[0,"\n      } els"]],"start1":518,"start2":518,"length1":24,"length2":77}]],"length":888,"saved":false}
